# Transaction Microservice  

## Описание  

Этот микросервис предназначен для обработки транзакций, управления лимитами и работы с курсами валют. Он предоставляет API для хранения, валидации и анализа транзакций, а также автоматическое обновление валютных курсов.  

## Функциональность  

- **Работа с транзакциями**  
  - Создание и сохранение транзакций.  
  - Конвертация валют в USD.  
  - Проверка превышения лимита.  

- **Управление лимитами**  
  - Установка и хранение лимитов на транзакции.  
  - Получение лимитов по аккаунту и категории расходов.  

- **Курсы валют**  
  - Получение актуальных курсов валют через `openexchangerates.org`.  
  - Конвертация сумм из разных валют в USD.  
  - Автоматическое обновление курсов раз в сутки (18:00 по CRON).  

## Архитектура  

Микросервис построен на основе **Spring Boot** и использует следующие компоненты:  

- **Spring Boot** — каркас приложения.  
- **Spring Data JPA** — работа с базой данных.  
- **Spring Scheduler** — планировщик задач.  
- **RestTemplate** — HTTP-клиент для запросов к API курсов валют.  
- **H2/PostgreSQL** — база данных для хранения транзакций и лимитов.  
- **SLF4J + Logback** — логирование.  

## Основные компоненты  

### 1. `TransactionService`  
Обрабатывает транзакции:  
- Конвертирует сумму в USD, если нужно.  
- Проверяет, превышен ли лимит.  
- Сохраняет транзакцию в БД.  
- Возвращает список транзакций, превышающих лимит.  

### 2. `LimitService`  
Управляет лимитами:  
- Сохраняет и обновляет лимиты.  
- Хранит лимиты в БД.  
- Автоматически создает лимит, если его нет.  

### 3. `ExchangeRateService`  
Работает с курсами валют:  
- Получает курсы с `openexchangerates.org`.  
- Хранит в БД последние курсы.  
- Конвертирует суммы в USD.  

### 4. `ExchangeRateScheduler`  
Планировщик, который раз в день обновляет курсы валют в БД.  
